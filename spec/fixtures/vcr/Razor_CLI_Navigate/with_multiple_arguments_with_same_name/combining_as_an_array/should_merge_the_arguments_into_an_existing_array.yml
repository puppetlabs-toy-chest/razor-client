---
http_interactions:
- request:
    method: get
    uri: http://localhost:8150/api
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '7432'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"commands":[{"name":"update-repo-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-repo-task","id":"http://localhost:8150/api/commands/update-repo-task"},{"name":"delete-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-hook","id":"http://localhost:8150/api/commands/delete-hook"},{"name":"delete-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-broker","id":"http://localhost:8150/api/commands/delete-broker"},{"name":"register-node","rel":"http://api.puppetlabs.com/razor/v1/commands/register-node","id":"http://localhost:8150/api/commands/register-node"},{"name":"update-policy-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-broker","id":"http://localhost:8150/api/commands/update-policy-broker"},{"name":"update-policy-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-task","id":"http://localhost:8150/api/commands/update-policy-task"},{"name":"set-node-desired-power-state","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-desired-power-state","id":"http://localhost:8150/api/commands/set-node-desired-power-state"},{"name":"set-node-hw-info","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-hw-info","id":"http://localhost:8150/api/commands/set-node-hw-info"},{"name":"run-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/run-hook","id":"http://localhost:8150/api/commands/run-hook"},{"name":"create-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/create-policy","id":"http://localhost:8150/api/commands/create-policy"},{"name":"reinstall-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reinstall-node","id":"http://localhost:8150/api/commands/reinstall-node"},{"name":"disable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/disable-policy","id":"http://localhost:8150/api/commands/disable-policy"},{"name":"enable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/enable-policy","id":"http://localhost:8150/api/commands/enable-policy"},{"name":"create-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/create-repo","id":"http://localhost:8150/api/commands/create-repo"},{"name":"remove-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-node-metadata","id":"http://localhost:8150/api/commands/remove-node-metadata"},{"name":"modify-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-node-metadata","id":"http://localhost:8150/api/commands/modify-node-metadata"},{"name":"update-policy-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-node-metadata","id":"http://localhost:8150/api/commands/update-policy-node-metadata"},{"name":"add-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/add-policy-tag","id":"http://localhost:8150/api/commands/add-policy-tag"},{"name":"remove-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-policy-tag","id":"http://localhost:8150/api/commands/remove-policy-tag"},{"name":"create-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/create-hook","id":"http://localhost:8150/api/commands/create-hook"},{"name":"update-policy-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-repo","id":"http://localhost:8150/api/commands/update-policy-repo"},{"name":"update-tag-rule","rel":"http://api.puppetlabs.com/razor/v1/commands/update-tag-rule","id":"http://localhost:8150/api/commands/update-tag-rule"},{"name":"delete-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-policy","id":"http://localhost:8150/api/commands/delete-policy"},{"name":"delete-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-tag","id":"http://localhost:8150/api/commands/delete-tag"},{"name":"create-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/create-tag","id":"http://localhost:8150/api/commands/create-tag"},{"name":"delete-node","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-node","id":"http://localhost:8150/api/commands/delete-node"},{"name":"reboot-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reboot-node","id":"http://localhost:8150/api/commands/reboot-node"},{"name":"move-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/move-policy","id":"http://localhost:8150/api/commands/move-policy"},{"name":"set-node-ipmi-credentials","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-ipmi-credentials","id":"http://localhost:8150/api/commands/set-node-ipmi-credentials"},{"name":"delete-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-repo","id":"http://localhost:8150/api/commands/delete-repo"},{"name":"modify-policy-max-count","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-policy-max-count","id":"http://localhost:8150/api/commands/modify-policy-max-count"},{"name":"update-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-node-metadata","id":"http://localhost:8150/api/commands/update-node-metadata"},{"name":"create-task","rel":"http://api.puppetlabs.com/razor/v1/commands/create-task","id":"http://localhost:8150/api/commands/create-task"},{"name":"update-hook-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-hook-configuration","id":"http://localhost:8150/api/commands/update-hook-configuration"},{"name":"create-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/create-broker","id":"http://localhost:8150/api/commands/create-broker"},{"name":"update-broker-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-broker-configuration","id":"http://localhost:8150/api/commands/update-broker-configuration"}],"collections":[{"name":"brokers","rel":"http://api.puppetlabs.com/razor/v1/collections/brokers","id":"http://localhost:8150/api/collections/brokers","params":{"depth":{"type":"number"}}},{"name":"repos","rel":"http://api.puppetlabs.com/razor/v1/collections/repos","id":"http://localhost:8150/api/collections/repos","params":{"depth":{"type":"number"}}},{"name":"tags","rel":"http://api.puppetlabs.com/razor/v1/collections/tags","id":"http://localhost:8150/api/collections/tags","params":{"depth":{"type":"number"}}},{"name":"policies","rel":"http://api.puppetlabs.com/razor/v1/collections/policies","id":"http://localhost:8150/api/collections/policies","params":{"depth":{"type":"number"}}},{"name":"nodes","rel":"http://api.puppetlabs.com/razor/v1/collections/nodes","id":"http://localhost:8150/api/collections/nodes","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"tasks","rel":"http://api.puppetlabs.com/razor/v1/collections/tasks","id":"http://localhost:8150/api/collections/tasks","params":{"depth":{"type":"number"}}},{"name":"commands","rel":"http://api.puppetlabs.com/razor/v1/collections/commands","id":"http://localhost:8150/api/collections/commands","params":{"depth":{"type":"number"}}},{"name":"events","rel":"http://api.puppetlabs.com/razor/v1/collections/events","id":"http://localhost:8150/api/collections/events","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"hooks","rel":"http://api.puppetlabs.com/razor/v1/collections/hooks","id":"http://localhost:8150/api/collections/hooks","params":{"depth":{"type":"number"}}},{"name":"config","rel":"http://api.puppetlabs.com/razor/v1/collections/config","id":"http://localhost:8150/api/collections/config"}],"version":{"server":"v1.9.5-9-g774b5ce-dirty"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/commands/create-repo
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      Etag:
      - '"server-version-v1.9.5-9-g774b5ce-dirty"'
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '8224'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"name":"create-repo","help":{"summary":"Create a new repository, from
        an ISO image or a URL","description":"Create a new repository, which can either
        contain the content to install a\nnode, or simply point to an existing online
        repository by URL.","schema":"# Access Control\n\nThis command''s access control
        pattern: `commands:create-repo:%{name}`\n\nWords surrounded by `%{...}` are
        substitutions from the input data: typically\nthe name of the object being
        modified, or some other critical detail, these\nallow roles to be granted
        partial access to modify the system.\n\nFor more detail on how the permission
        strings are structured and work, you can\nsee the [Shiro Permissions documentation][shiro].  That
        pattern is expanded\nand then a permission check applied to it, before the
        command is authorized.\n\nThese checks only apply if security is enabled in
        the Razor configuration\nfile; on this server security is currently disabled.\n\n[shiro]:
        http://shiro.apache.org/permissions.html\n\n# Attributes\n\n * name\n   -
        The name of the repository.\n   - This attribute is required.\n   - It must
        be of type string.\n   - It must be between 1 and 250 in length.\n   - Its
        argument position is 0.\n\n * url\n   - The URL of the remote repository to
        use.\n   - It must be of type string.\n   - If present, iso_url, no_content
        must not be present.\n   - It must be between 1 and 1000 in length.\n\n *
        iso_url\n   - The URL of the ISO image to download and unpack to create the\n     repository.  This
        can be an HTTP or HTTPS URL, or it can be a\n     file URL.\n     \n     In
        the latter case, the file path is interpreted as a path on the\n     Razor
        server, rather than a path on the client.  This requires that\n     you manually
        place the ISO image on the server before invoking the\n     command.\n   -
        It must be of type string.\n   - If present, url, no_content must not be present.\n   -
        It must be between 1 and 1000 in length.\n\n * no_content\n   - For cases
        where extraction will be done manually, this argument\n     creates a stub
        directory in the repo store where the extracted\n     contents can be placed.\n   -
        It must be of type boolean.\n   - If present, iso_url, url must not be present.\n\n
        * task\n   - The name of the default task associated with this repository.  This
        is\n     used to install nodes that match a policy using this repository;\n     generally
        it should match the OS that the URL or ISO_URL attributes point\n     to.
        Note that this attribute can be overridden by the task on the policy.\n   -
        This attribute is required.\n   - It must be of type string.\n","examples":{"api":"Create
        a repository from an ISO image, which will be downloaded and unpacked\nby
        the razor-server in the background:\n\n    {\n      \"name\":    \"fedora21\",\n      \"iso_url\":
        \"http://example.com/Fedora-21-x86_64-DVD.iso\"\n      \"task\":    \"fedora\"\n    }\n\nYou
        can also unpack an ISO image from a file *on the server*; this does not\nupload
        the file from the client:\n    {\n      \"name\":    \"fedora21\",\n      \"iso_url\":
        \"file:///tmp/Fedora-21-x86_64-DVD.iso\"\n      \"task\":    \"fedora\"\n    }\n\nFinally,
        you can provide a `url` property when you create the repository;\nthis form
        is merely a pointer to a resource somewhere and nothing will be\ndownloaded
        onto the Razor server:\n\n    {\n      \"name\": \"fedora21\",\n      \"url\":  \"http://mirrors.n-ix.net/fedora/linux/releases/21/Server/x86_64/os\"\n      \"task\":
        \"fedora\"\n    }","cli":"Create a repository from an ISO image, which will
        be downloaded and unpacked\nby the razor-server in the background:\n\n    razor
        create-repo --name fedora21 \\\n        --iso-url http://example.com/Fedora-21-x86_64-DVD.iso
        \\\n        --task fedora\n\nYou can also unpack an ISO image from a file
        *on the server*; this does not\nupload the file from the client:\n\n    razor
        create-repo --name fedora21 \\\n        --iso-url file:///tmp/Fedora-21-x86_64-DVD.iso
        \\\n        --task fedora\n\nFinally, you can provide a `url` property when
        you create the repository;\nthis form is merely a pointer to a resource somewhere
        and nothing will be\ndownloaded onto the Razor server:\n\n    razor create-repo
        --name fedora21 --url \\\n        http://mirrors.n-ix.net/fedora/linux/releases/21/Server/x86_64/os/
        \\\n        --task fedora\n\nWith positional arguments, this can be shortened::\n\n    razor
        create-repo fedora21 --task fedora --url \\\n        http://mirrors.n-ix.net/fedora/linux/releases/21/Server/x86_64/os/"},"full":"#
        SYNOPSIS\nCreate a new repository, from an ISO image or a URL\n\n# DESCRIPTION\nCreate
        a new repository, which can either contain the content to install a\nnode,
        or simply point to an existing online repository by URL.\n# Access Control\n\nThis
        command''s access control pattern: `commands:create-repo:%{name}`\n\nWords
        surrounded by `%{...}` are substitutions from the input data: typically\nthe
        name of the object being modified, or some other critical detail, these\nallow
        roles to be granted partial access to modify the system.\n\nFor more detail
        on how the permission strings are structured and work, you can\nsee the [Shiro
        Permissions documentation][shiro].  That pattern is expanded\nand then a permission
        check applied to it, before the command is authorized.\n\nThese checks only
        apply if security is enabled in the Razor configuration\nfile; on this server
        security is currently disabled.\n\n[shiro]: http://shiro.apache.org/permissions.html\n\n#
        Attributes\n\n * name\n   - The name of the repository.\n   - This attribute
        is required.\n   - It must be of type string.\n   - It must be between 1 and
        250 in length.\n   - Its argument position is 0.\n\n * url\n   - The URL of
        the remote repository to use.\n   - It must be of type string.\n   - If present,
        iso_url, no_content must not be present.\n   - It must be between 1 and 1000
        in length.\n\n * iso_url\n   - The URL of the ISO image to download and unpack
        to create the\n     repository.  This can be an HTTP or HTTPS URL, or it can
        be a\n     file URL.\n     \n     In the latter case, the file path is interpreted
        as a path on the\n     Razor server, rather than a path on the client.  This
        requires that\n     you manually place the ISO image on the server before
        invoking the\n     command.\n   - It must be of type string.\n   - If present,
        url, no_content must not be present.\n   - It must be between 1 and 1000 in
        length.\n\n * no_content\n   - For cases where extraction will be done manually,
        this argument\n     creates a stub directory in the repo store where the extracted\n     contents
        can be placed.\n   - It must be of type boolean.\n   - If present, iso_url,
        url must not be present.\n\n * task\n   - The name of the default task associated
        with this repository.  This is\n     used to install nodes that match a policy
        using this repository;\n     generally it should match the OS that the URL
        or ISO_URL attributes point\n     to. Note that this attribute can be overridden
        by the task on the policy.\n   - This attribute is required.\n   - It must
        be of type string.\n\n# EXAMPLES\n\n  Create a repository from an ISO image,
        which will be downloaded and unpacked\n  by the razor-server in the background:\n  \n      {\n        \"name\":    \"fedora21\",\n        \"iso_url\":
        \"http://example.com/Fedora-21-x86_64-DVD.iso\"\n        \"task\":    \"fedora\"\n      }\n  \n  You
        can also unpack an ISO image from a file *on the server*; this does not\n  upload
        the file from the client:\n      {\n        \"name\":    \"fedora21\",\n        \"iso_url\":
        \"file:///tmp/Fedora-21-x86_64-DVD.iso\"\n        \"task\":    \"fedora\"\n      }\n  \n  Finally,
        you can provide a `url` property when you create the repository;\n  this form
        is merely a pointer to a resource somewhere and nothing will be\n  downloaded
        onto the Razor server:\n  \n      {\n        \"name\": \"fedora21\",\n        \"url\":  \"http://mirrors.n-ix.net/fedora/linux/releases/21/Server/x86_64/os\"\n        \"task\":
        \"fedora\"\n      }\n"},"schema":{"name":{"type":"string","position":0},"url":{"type":"string"},"iso_url":{"type":"string","aliases":["iso-url"]},"no_content":{"type":"boolean","aliases":["no-content"]},"task":{"type":"string"}}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: post
    uri: http://localhost:8150/api/commands/create-repo
    body:
      encoding: UTF-8
      string: '{"name":"name","url":"http://url.com/some.iso","task":"noop"}'
    headers:
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '201'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/repos/member","id":"http://localhost:8150/api/collections/repos/name","name":"name","command":"http://localhost:8150/api/collections/commands/1"}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/collections/repos/name
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '335'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/repos/member","id":"http://localhost:8150/api/collections/repos/name","name":"name","iso_url":null,"url":"http://url.com/some.iso","task":{"spec":"http://api.puppetlabs.com/razor/v1/collections/tasks/member","id":"http://localhost:8150/api/collections/tasks/noop","name":"noop"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '7432'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"commands":[{"name":"update-repo-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-repo-task","id":"http://localhost:8150/api/commands/update-repo-task"},{"name":"delete-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-hook","id":"http://localhost:8150/api/commands/delete-hook"},{"name":"delete-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-broker","id":"http://localhost:8150/api/commands/delete-broker"},{"name":"register-node","rel":"http://api.puppetlabs.com/razor/v1/commands/register-node","id":"http://localhost:8150/api/commands/register-node"},{"name":"update-policy-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-broker","id":"http://localhost:8150/api/commands/update-policy-broker"},{"name":"update-policy-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-task","id":"http://localhost:8150/api/commands/update-policy-task"},{"name":"set-node-desired-power-state","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-desired-power-state","id":"http://localhost:8150/api/commands/set-node-desired-power-state"},{"name":"set-node-hw-info","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-hw-info","id":"http://localhost:8150/api/commands/set-node-hw-info"},{"name":"run-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/run-hook","id":"http://localhost:8150/api/commands/run-hook"},{"name":"create-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/create-policy","id":"http://localhost:8150/api/commands/create-policy"},{"name":"reinstall-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reinstall-node","id":"http://localhost:8150/api/commands/reinstall-node"},{"name":"disable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/disable-policy","id":"http://localhost:8150/api/commands/disable-policy"},{"name":"enable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/enable-policy","id":"http://localhost:8150/api/commands/enable-policy"},{"name":"create-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/create-repo","id":"http://localhost:8150/api/commands/create-repo"},{"name":"remove-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-node-metadata","id":"http://localhost:8150/api/commands/remove-node-metadata"},{"name":"modify-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-node-metadata","id":"http://localhost:8150/api/commands/modify-node-metadata"},{"name":"update-policy-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-node-metadata","id":"http://localhost:8150/api/commands/update-policy-node-metadata"},{"name":"add-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/add-policy-tag","id":"http://localhost:8150/api/commands/add-policy-tag"},{"name":"remove-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-policy-tag","id":"http://localhost:8150/api/commands/remove-policy-tag"},{"name":"create-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/create-hook","id":"http://localhost:8150/api/commands/create-hook"},{"name":"update-policy-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-repo","id":"http://localhost:8150/api/commands/update-policy-repo"},{"name":"update-tag-rule","rel":"http://api.puppetlabs.com/razor/v1/commands/update-tag-rule","id":"http://localhost:8150/api/commands/update-tag-rule"},{"name":"delete-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-policy","id":"http://localhost:8150/api/commands/delete-policy"},{"name":"delete-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-tag","id":"http://localhost:8150/api/commands/delete-tag"},{"name":"create-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/create-tag","id":"http://localhost:8150/api/commands/create-tag"},{"name":"delete-node","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-node","id":"http://localhost:8150/api/commands/delete-node"},{"name":"reboot-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reboot-node","id":"http://localhost:8150/api/commands/reboot-node"},{"name":"move-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/move-policy","id":"http://localhost:8150/api/commands/move-policy"},{"name":"set-node-ipmi-credentials","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-ipmi-credentials","id":"http://localhost:8150/api/commands/set-node-ipmi-credentials"},{"name":"delete-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-repo","id":"http://localhost:8150/api/commands/delete-repo"},{"name":"modify-policy-max-count","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-policy-max-count","id":"http://localhost:8150/api/commands/modify-policy-max-count"},{"name":"update-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-node-metadata","id":"http://localhost:8150/api/commands/update-node-metadata"},{"name":"create-task","rel":"http://api.puppetlabs.com/razor/v1/commands/create-task","id":"http://localhost:8150/api/commands/create-task"},{"name":"update-hook-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-hook-configuration","id":"http://localhost:8150/api/commands/update-hook-configuration"},{"name":"create-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/create-broker","id":"http://localhost:8150/api/commands/create-broker"},{"name":"update-broker-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-broker-configuration","id":"http://localhost:8150/api/commands/update-broker-configuration"}],"collections":[{"name":"brokers","rel":"http://api.puppetlabs.com/razor/v1/collections/brokers","id":"http://localhost:8150/api/collections/brokers","params":{"depth":{"type":"number"}}},{"name":"repos","rel":"http://api.puppetlabs.com/razor/v1/collections/repos","id":"http://localhost:8150/api/collections/repos","params":{"depth":{"type":"number"}}},{"name":"tags","rel":"http://api.puppetlabs.com/razor/v1/collections/tags","id":"http://localhost:8150/api/collections/tags","params":{"depth":{"type":"number"}}},{"name":"policies","rel":"http://api.puppetlabs.com/razor/v1/collections/policies","id":"http://localhost:8150/api/collections/policies","params":{"depth":{"type":"number"}}},{"name":"nodes","rel":"http://api.puppetlabs.com/razor/v1/collections/nodes","id":"http://localhost:8150/api/collections/nodes","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"tasks","rel":"http://api.puppetlabs.com/razor/v1/collections/tasks","id":"http://localhost:8150/api/collections/tasks","params":{"depth":{"type":"number"}}},{"name":"commands","rel":"http://api.puppetlabs.com/razor/v1/collections/commands","id":"http://localhost:8150/api/collections/commands","params":{"depth":{"type":"number"}}},{"name":"events","rel":"http://api.puppetlabs.com/razor/v1/collections/events","id":"http://localhost:8150/api/collections/events","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"hooks","rel":"http://api.puppetlabs.com/razor/v1/collections/hooks","id":"http://localhost:8150/api/collections/hooks","params":{"depth":{"type":"number"}}},{"name":"config","rel":"http://api.puppetlabs.com/razor/v1/collections/config","id":"http://localhost:8150/api/collections/config"}],"version":{"server":"v1.9.5-9-g774b5ce-dirty"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/commands/create-broker
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      Etag:
      - '"server-version-v1.9.5-9-g774b5ce-dirty"'
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '5560'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"name":"create-broker","help":{"summary":"Create a new broker configuration
        for hand-off of installed nodes","description":"Create a new broker configuration.  Brokers
        are responsible for handing a node\noff to a config management system, such
        as Puppet or Chef.  In cases where you\nhave no configuration management system,
        you can use the `noop` broker.","schema":"# Access Control\n\nThis command''s
        access control pattern: `commands:create-broker:%{name}`\n\nWords surrounded
        by `%{...}` are substitutions from the input data: typically\nthe name of
        the object being modified, or some other critical detail, these\nallow roles
        to be granted partial access to modify the system.\n\nFor more detail on how
        the permission strings are structured and work, you can\nsee the [Shiro Permissions
        documentation][shiro].  That pattern is expanded\nand then a permission check
        applied to it, before the command is authorized.\n\nThese checks only apply
        if security is enabled in the Razor configuration\nfile; on this server security
        is currently disabled.\n\n[shiro]: http://shiro.apache.org/permissions.html\n\n#
        Attributes\n\n * name\n   - The name of the broker, as it will be referenced
        within Razor.\n     This is the name that you supply to, eg, `create-policy`
        to specify\n     which broker the node will be handed off via after installation.\n   -
        This attribute is required.\n   - It must be of type string.\n   - It must
        be between 1 and 250 in length.\n   - Its argument position is 0.\n\n * broker_type\n   -
        The broker type from which this broker is created.  The available\n     broker
        types on your server are:\n     - legacy-puppet\n     - noop\n     - chef\n     -
        puppet-pe\n     - puppet\n   - This attribute is required.\n   - It must be
        of type string.\n   - It must match the name of an existing broker type.\n   -
        Its argument position is 1.\n\n * configuration\n   - The configuration for
        the broker.  The acceptable values here are\n     determined by the `broker_type`
        selected.  In general this has\n     settings like which server to contact,
        and other configuration\n     related to handing on the newly installed system
        to the final\n     configuration management system.\n     \n     This attribute
        can be abbreviated as `c` for convenience.\n   - It must be of type object.\n","examples":{"api":"Creating
        a simple Puppet broker:\n\n{\n  \"name\": \"puppet\",\n  \"configuration\":
        {\n     \"server\":      \"puppet.example.org\",\n     \"environment\": \"production\"\n  },\n  \"broker_type\":
        \"puppet\"\n}","cli":"Creating a simple Puppet broker:\n\n    razor create-broker
        --name puppet -c server=puppet.example.org \\\n        -c environment=production
        --broker-type puppet\n\nWith positional arguments, this can be shortened::\n\n    razor
        create-broker puppet puppet -c server=puppet.example.org \\\n        -c environment=production"},"full":"#
        SYNOPSIS\nCreate a new broker configuration for hand-off of installed nodes\n\n#
        DESCRIPTION\nCreate a new broker configuration.  Brokers are responsible for
        handing a node\noff to a config management system, such as Puppet or Chef.  In
        cases where you\nhave no configuration management system, you can use the
        `noop` broker.\n# Access Control\n\nThis command''s access control pattern:
        `commands:create-broker:%{name}`\n\nWords surrounded by `%{...}` are substitutions
        from the input data: typically\nthe name of the object being modified, or
        some other critical detail, these\nallow roles to be granted partial access
        to modify the system.\n\nFor more detail on how the permission strings are
        structured and work, you can\nsee the [Shiro Permissions documentation][shiro].  That
        pattern is expanded\nand then a permission check applied to it, before the
        command is authorized.\n\nThese checks only apply if security is enabled in
        the Razor configuration\nfile; on this server security is currently disabled.\n\n[shiro]:
        http://shiro.apache.org/permissions.html\n\n# Attributes\n\n * name\n   -
        The name of the broker, as it will be referenced within Razor.\n     This
        is the name that you supply to, eg, `create-policy` to specify\n     which
        broker the node will be handed off via after installation.\n   - This attribute
        is required.\n   - It must be of type string.\n   - It must be between 1 and
        250 in length.\n   - Its argument position is 0.\n\n * broker_type\n   - The
        broker type from which this broker is created.  The available\n     broker
        types on your server are:\n     - legacy-puppet\n     - noop\n     - chef\n     -
        puppet-pe\n     - puppet\n   - This attribute is required.\n   - It must be
        of type string.\n   - It must match the name of an existing broker type.\n   -
        Its argument position is 1.\n\n * configuration\n   - The configuration for
        the broker.  The acceptable values here are\n     determined by the `broker_type`
        selected.  In general this has\n     settings like which server to contact,
        and other configuration\n     related to handing on the newly installed system
        to the final\n     configuration management system.\n     \n     This attribute
        can be abbreviated as `c` for convenience.\n   - It must be of type object.\n\n#
        EXAMPLES\n\n  Creating a simple Puppet broker:\n  \n  {\n    \"name\": \"puppet\",\n    \"configuration\":
        {\n       \"server\":      \"puppet.example.org\",\n       \"environment\":
        \"production\"\n    },\n    \"broker_type\": \"puppet\"\n  }\n"},"schema":{"name":{"type":"string","position":0},"broker_type":{"type":"string","aliases":["broker-type"],"position":1},"configuration":{"type":"object","aliases":["c"]}}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: post
    uri: http://localhost:8150/api/commands/create-broker
    body:
      encoding: UTF-8
      string: '{"name":"puppet","configuration":{"server":"puppet.example.org","environment":"production"},"broker_type":"puppet"}'
    headers:
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '209'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/brokers/member","id":"http://localhost:8150/api/collections/brokers/puppet","name":"puppet","command":"http://localhost:8150/api/collections/commands/2"}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/collections/brokers/puppet
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '356'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/brokers/member","id":"http://localhost:8150/api/collections/brokers/puppet","name":"puppet","configuration":{"server":"puppet.example.org","environment":"production"},"broker_type":"puppet","policies":{"id":"http://localhost:8150/api/collections/brokers/puppet/policies","count":0,"name":"policies"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '7432'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"commands":[{"name":"update-repo-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-repo-task","id":"http://localhost:8150/api/commands/update-repo-task"},{"name":"delete-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-hook","id":"http://localhost:8150/api/commands/delete-hook"},{"name":"delete-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-broker","id":"http://localhost:8150/api/commands/delete-broker"},{"name":"register-node","rel":"http://api.puppetlabs.com/razor/v1/commands/register-node","id":"http://localhost:8150/api/commands/register-node"},{"name":"update-policy-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-broker","id":"http://localhost:8150/api/commands/update-policy-broker"},{"name":"update-policy-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-task","id":"http://localhost:8150/api/commands/update-policy-task"},{"name":"set-node-desired-power-state","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-desired-power-state","id":"http://localhost:8150/api/commands/set-node-desired-power-state"},{"name":"set-node-hw-info","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-hw-info","id":"http://localhost:8150/api/commands/set-node-hw-info"},{"name":"run-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/run-hook","id":"http://localhost:8150/api/commands/run-hook"},{"name":"create-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/create-policy","id":"http://localhost:8150/api/commands/create-policy"},{"name":"reinstall-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reinstall-node","id":"http://localhost:8150/api/commands/reinstall-node"},{"name":"disable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/disable-policy","id":"http://localhost:8150/api/commands/disable-policy"},{"name":"enable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/enable-policy","id":"http://localhost:8150/api/commands/enable-policy"},{"name":"create-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/create-repo","id":"http://localhost:8150/api/commands/create-repo"},{"name":"remove-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-node-metadata","id":"http://localhost:8150/api/commands/remove-node-metadata"},{"name":"modify-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-node-metadata","id":"http://localhost:8150/api/commands/modify-node-metadata"},{"name":"update-policy-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-node-metadata","id":"http://localhost:8150/api/commands/update-policy-node-metadata"},{"name":"add-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/add-policy-tag","id":"http://localhost:8150/api/commands/add-policy-tag"},{"name":"remove-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-policy-tag","id":"http://localhost:8150/api/commands/remove-policy-tag"},{"name":"create-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/create-hook","id":"http://localhost:8150/api/commands/create-hook"},{"name":"update-policy-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-repo","id":"http://localhost:8150/api/commands/update-policy-repo"},{"name":"update-tag-rule","rel":"http://api.puppetlabs.com/razor/v1/commands/update-tag-rule","id":"http://localhost:8150/api/commands/update-tag-rule"},{"name":"delete-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-policy","id":"http://localhost:8150/api/commands/delete-policy"},{"name":"delete-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-tag","id":"http://localhost:8150/api/commands/delete-tag"},{"name":"create-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/create-tag","id":"http://localhost:8150/api/commands/create-tag"},{"name":"delete-node","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-node","id":"http://localhost:8150/api/commands/delete-node"},{"name":"reboot-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reboot-node","id":"http://localhost:8150/api/commands/reboot-node"},{"name":"move-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/move-policy","id":"http://localhost:8150/api/commands/move-policy"},{"name":"set-node-ipmi-credentials","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-ipmi-credentials","id":"http://localhost:8150/api/commands/set-node-ipmi-credentials"},{"name":"delete-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-repo","id":"http://localhost:8150/api/commands/delete-repo"},{"name":"modify-policy-max-count","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-policy-max-count","id":"http://localhost:8150/api/commands/modify-policy-max-count"},{"name":"update-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-node-metadata","id":"http://localhost:8150/api/commands/update-node-metadata"},{"name":"create-task","rel":"http://api.puppetlabs.com/razor/v1/commands/create-task","id":"http://localhost:8150/api/commands/create-task"},{"name":"update-hook-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-hook-configuration","id":"http://localhost:8150/api/commands/update-hook-configuration"},{"name":"create-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/create-broker","id":"http://localhost:8150/api/commands/create-broker"},{"name":"update-broker-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-broker-configuration","id":"http://localhost:8150/api/commands/update-broker-configuration"}],"collections":[{"name":"brokers","rel":"http://api.puppetlabs.com/razor/v1/collections/brokers","id":"http://localhost:8150/api/collections/brokers","params":{"depth":{"type":"number"}}},{"name":"repos","rel":"http://api.puppetlabs.com/razor/v1/collections/repos","id":"http://localhost:8150/api/collections/repos","params":{"depth":{"type":"number"}}},{"name":"tags","rel":"http://api.puppetlabs.com/razor/v1/collections/tags","id":"http://localhost:8150/api/collections/tags","params":{"depth":{"type":"number"}}},{"name":"policies","rel":"http://api.puppetlabs.com/razor/v1/collections/policies","id":"http://localhost:8150/api/collections/policies","params":{"depth":{"type":"number"}}},{"name":"nodes","rel":"http://api.puppetlabs.com/razor/v1/collections/nodes","id":"http://localhost:8150/api/collections/nodes","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"tasks","rel":"http://api.puppetlabs.com/razor/v1/collections/tasks","id":"http://localhost:8150/api/collections/tasks","params":{"depth":{"type":"number"}}},{"name":"commands","rel":"http://api.puppetlabs.com/razor/v1/collections/commands","id":"http://localhost:8150/api/collections/commands","params":{"depth":{"type":"number"}}},{"name":"events","rel":"http://api.puppetlabs.com/razor/v1/collections/events","id":"http://localhost:8150/api/collections/events","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"hooks","rel":"http://api.puppetlabs.com/razor/v1/collections/hooks","id":"http://localhost:8150/api/collections/hooks","params":{"depth":{"type":"number"}}},{"name":"config","rel":"http://api.puppetlabs.com/razor/v1/collections/config","id":"http://localhost:8150/api/collections/config"}],"version":{"server":"v1.9.5-9-g774b5ce-dirty"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/commands/create-tag
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      Etag:
      - '"server-version-v1.9.5-9-g774b5ce-dirty"'
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '4738'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJuYW1lIjoiY3JlYXRlLXRhZyIsImhlbHAiOnsic3VtbWFyeSI6IkNyZWF0
        ZSBhIG5ldyB0YWciLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBhIG5ldyB0YWcs
        IGFuZCBzZXQgdGhlIHJ1bGUgaXQgd2lsbCB1c2UgdG8gbWF0Y2ggb24gZmFj
        dHMgYW5kIG5vZGVcbm1ldGFkYXRhLiIsInNjaGVtYSI6IiMgQWNjZXNzIENv
        bnRyb2xcblxuVGhpcyBjb21tYW5kJ3MgYWNjZXNzIGNvbnRyb2wgcGF0dGVy
        bjogYGNvbW1hbmRzOmNyZWF0ZS10YWc6JXtuYW1lfWBcblxuV29yZHMgc3Vy
        cm91bmRlZCBieSBgJXsuLi59YCBhcmUgc3Vic3RpdHV0aW9ucyBmcm9tIHRo
        ZSBpbnB1dCBkYXRhOiB0eXBpY2FsbHlcbnRoZSBuYW1lIG9mIHRoZSBvYmpl
        Y3QgYmVpbmcgbW9kaWZpZWQsIG9yIHNvbWUgb3RoZXIgY3JpdGljYWwgZGV0
        YWlsLCB0aGVzZVxuYWxsb3cgcm9sZXMgdG8gYmUgZ3JhbnRlZCBwYXJ0aWFs
        IGFjY2VzcyB0byBtb2RpZnkgdGhlIHN5c3RlbS5cblxuRm9yIG1vcmUgZGV0
        YWlsIG9uIGhvdyB0aGUgcGVybWlzc2lvbiBzdHJpbmdzIGFyZSBzdHJ1Y3R1
        cmVkIGFuZCB3b3JrLCB5b3UgY2FuXG5zZWUgdGhlIFtTaGlybyBQZXJtaXNz
        aW9ucyBkb2N1bWVudGF0aW9uXVtzaGlyb10uICBUaGF0IHBhdHRlcm4gaXMg
        ZXhwYW5kZWRcbmFuZCB0aGVuIGEgcGVybWlzc2lvbiBjaGVjayBhcHBsaWVk
        IHRvIGl0LCBiZWZvcmUgdGhlIGNvbW1hbmQgaXMgYXV0aG9yaXplZC5cblxu
        VGhlc2UgY2hlY2tzIG9ubHkgYXBwbHkgaWYgc2VjdXJpdHkgaXMgZW5hYmxl
        ZCBpbiB0aGUgUmF6b3IgY29uZmlndXJhdGlvblxuZmlsZTsgb24gdGhpcyBz
        ZXJ2ZXIgc2VjdXJpdHkgaXMgY3VycmVudGx5IGRpc2FibGVkLlxuXG5bc2hp
        cm9dOiBodHRwOi8vc2hpcm8uYXBhY2hlLm9yZy9wZXJtaXNzaW9ucy5odG1s
        XG5cbiMgQXR0cmlidXRlc1xuXG4gKiBuYW1lXG4gICAtIFRoZSBuYW1lIG9m
        IHRoZSB0YWcuXG4gICAtIFRoaXMgYXR0cmlidXRlIGlzIHJlcXVpcmVkLlxu
        ICAgLSBJdCBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nLlxuICAgLSBJdCBtdXN0
        IGJlIGJldHdlZW4gMSBhbmQgSW5maW5pdHkgaW4gbGVuZ3RoLlxuICAgLSBJ
        dHMgYXJndW1lbnQgcG9zaXRpb24gaXMgMC5cblxuICogcnVsZVxuICAgLSBU
        aGUgdGFnIG1hdGNoZXMgYSBub2RlIGlmIGV2YWx1YXRpbmcgdGhpcyBydW4g
        YWdhaW5zdCB0aGUgdGFn4oCZcyBmYWN0c1xuICAgICByZXN1bHRzIGluIHRy
        dWUuIE5vdGUgdGhhdCB0YWcgbWF0Y2hpbmcgaXMgY2FzZSBzZW5zaXRpdmUu
        XG4gICAgIFxuICAgICBGb3IgZXhhbXBsZSwgaGVyZSBpcyBhIHRhZyBydWxl
        OlxuICAgICBcbiAgICAgICAgIFtcIm9yXCIsXG4gICAgICAgICAgW1wiPVwi
        LCBbXCJmYWN0XCIsIFwibWFjYWRkcmVzc1wiXSwgXCJkZTplYTpkYjplZTpm
        MDowMFwiXVxuICAgICAgICAgIFtcIj1cIiwgW1wiZmFjdFwiLCBcIm1hY2Fk
        ZHJlc3NcIl0sIFwiZGU6ZWE6ZGI6ZWU6ZjA6MDFcIl1dXG4gICAgIFxuICAg
        ICBUaGUgdGFnIGNvdWxkIGFsc28gYmUgd3JpdHRlbiBsaWtlIHRoaXM6XG4g
        ICAgIFxuICAgICAgICAgW1wiaW5cIiwgW1wiZmFjdFwiLCBcIm1hY2FkZHJl
        c3NcIl0sIFwiZGU6ZWE6ZGI6ZWU6ZjA6MDBcIiwgXCJkZTplYTpkYjplZTpm
        MDowMVwiXVxuICAgICBcbiAgICAgVGhlIHN5bnRheCBmb3IgcnVsZSBleHBy
        ZXNzaW9ucyBpcyBkZWZpbmVkIGluIGBsaWIvcmF6b3IvbWF0Y2hlci5yYmAu
        XG4gICAgIEV4cHJlc3Npb25zIGFyZSBvZiB0aGUgZm9ybSBgW29wIGFyZzEg
        YXJnMiAuLiBhcmduXWBcbiAgICAgd2hlcmUgb3AgaXMgb25lIG9mIHRoZSBv
        cGVyYXRvcnMgYmVsb3csIGFuZCBhcmcxIHRocm91Z2ggYXJnbiBhcmUgdGhl
        XG4gICAgIGFyZ3VtZW50cyBmb3IgdGhlIG9wZXJhdG9yLiBJZiB0aGV5IGFy
        ZSBleHByZXNzaW9ucyB0aGVtc2VsdmVzLCB0aGV5IHdpbGxcbiAgICAgYmUg
        ZXZhbHVhdGVkIGJlZm9yZSBgb3BgIGlzIGV2YWx1YXRlZC5cbiAgIC0gVGhp
        cyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQuXG4gICAtIEl0IG11c3QgYmUgb2Yg
        dHlwZSBhcnJheS5cbiAgIC0gSXRzIGFyZ3VtZW50IHBvc2l0aW9uIGlzIDEu
        XG4iLCJleGFtcGxlcyI6eyJhcGkiOiJDcmVhdGUgYSBzaW1wbGUgdGFnOlxu
        XG57XG4gIFwibmFtZVwiOiBcInNtYWxsXCIsXG4gIFwicnVsZVwiOiBbXCI9
        XCIsIFtcImZhY3RcIiwgXCJwcm9jZXNzb3Jjb3VudFwiXSwgXCIyXCJdXG59
        IiwiY2xpIjoiQ3JlYXRlIGEgc2ltcGxlIHRhZzpcblxuICAgIHJhem9yIGNy
        ZWF0ZS10YWcgLS1uYW1lIHNtYWxsIC0tcnVsZSAnW1wiPVwiLCBbXCJmYWN0
        XCIsIFwicHJvY2Vzc29yY291bnRcIl0sIFwiMlwiXSdcblxuV2l0aCBwb3Np
        dGlvbmFsIGFyZ3VtZW50cywgdGhpcyBjYW4gYmUgc2hvcnRlbmVkOjpcblxu
        ICAgIHJhem9yIGNyZWF0ZS10YWcgc21hbGwgJ1tcIj1cIiwgW1wiZmFjdFwi
        LCBcInByb2Nlc3NvcmNvdW50XCJdLCBcIjJcIl0nIn0sImZ1bGwiOiIjIFNZ
        Tk9QU0lTXG5DcmVhdGUgYSBuZXcgdGFnXG5cbiMgREVTQ1JJUFRJT05cbkNy
        ZWF0ZSBhIG5ldyB0YWcsIGFuZCBzZXQgdGhlIHJ1bGUgaXQgd2lsbCB1c2Ug
        dG8gbWF0Y2ggb24gZmFjdHMgYW5kIG5vZGVcbm1ldGFkYXRhLlxuIyBBY2Nl
        c3MgQ29udHJvbFxuXG5UaGlzIGNvbW1hbmQncyBhY2Nlc3MgY29udHJvbCBw
        YXR0ZXJuOiBgY29tbWFuZHM6Y3JlYXRlLXRhZzole25hbWV9YFxuXG5Xb3Jk
        cyBzdXJyb3VuZGVkIGJ5IGAley4uLn1gIGFyZSBzdWJzdGl0dXRpb25zIGZy
        b20gdGhlIGlucHV0IGRhdGE6IHR5cGljYWxseVxudGhlIG5hbWUgb2YgdGhl
        IG9iamVjdCBiZWluZyBtb2RpZmllZCwgb3Igc29tZSBvdGhlciBjcml0aWNh
        bCBkZXRhaWwsIHRoZXNlXG5hbGxvdyByb2xlcyB0byBiZSBncmFudGVkIHBh
        cnRpYWwgYWNjZXNzIHRvIG1vZGlmeSB0aGUgc3lzdGVtLlxuXG5Gb3IgbW9y
        ZSBkZXRhaWwgb24gaG93IHRoZSBwZXJtaXNzaW9uIHN0cmluZ3MgYXJlIHN0
        cnVjdHVyZWQgYW5kIHdvcmssIHlvdSBjYW5cbnNlZSB0aGUgW1NoaXJvIFBl
        cm1pc3Npb25zIGRvY3VtZW50YXRpb25dW3NoaXJvXS4gIFRoYXQgcGF0dGVy
        biBpcyBleHBhbmRlZFxuYW5kIHRoZW4gYSBwZXJtaXNzaW9uIGNoZWNrIGFw
        cGxpZWQgdG8gaXQsIGJlZm9yZSB0aGUgY29tbWFuZCBpcyBhdXRob3JpemVk
        LlxuXG5UaGVzZSBjaGVja3Mgb25seSBhcHBseSBpZiBzZWN1cml0eSBpcyBl
        bmFibGVkIGluIHRoZSBSYXpvciBjb25maWd1cmF0aW9uXG5maWxlOyBvbiB0
        aGlzIHNlcnZlciBzZWN1cml0eSBpcyBjdXJyZW50bHkgZGlzYWJsZWQuXG5c
        bltzaGlyb106IGh0dHA6Ly9zaGlyby5hcGFjaGUub3JnL3Blcm1pc3Npb25z
        Lmh0bWxcblxuIyBBdHRyaWJ1dGVzXG5cbiAqIG5hbWVcbiAgIC0gVGhlIG5h
        bWUgb2YgdGhlIHRhZy5cbiAgIC0gVGhpcyBhdHRyaWJ1dGUgaXMgcmVxdWly
        ZWQuXG4gICAtIEl0IG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuXG4gICAtIEl0
        IG11c3QgYmUgYmV0d2VlbiAxIGFuZCBJbmZpbml0eSBpbiBsZW5ndGguXG4g
        ICAtIEl0cyBhcmd1bWVudCBwb3NpdGlvbiBpcyAwLlxuXG4gKiBydWxlXG4g
        ICAtIFRoZSB0YWcgbWF0Y2hlcyBhIG5vZGUgaWYgZXZhbHVhdGluZyB0aGlz
        IHJ1biBhZ2FpbnN0IHRoZSB0YWfigJlzIGZhY3RzXG4gICAgIHJlc3VsdHMg
        aW4gdHJ1ZS4gTm90ZSB0aGF0IHRhZyBtYXRjaGluZyBpcyBjYXNlIHNlbnNp
        dGl2ZS5cbiAgICAgXG4gICAgIEZvciBleGFtcGxlLCBoZXJlIGlzIGEgdGFn
        IHJ1bGU6XG4gICAgIFxuICAgICAgICAgW1wib3JcIixcbiAgICAgICAgICBb
        XCI9XCIsIFtcImZhY3RcIiwgXCJtYWNhZGRyZXNzXCJdLCBcImRlOmVhOmRi
        OmVlOmYwOjAwXCJdXG4gICAgICAgICAgW1wiPVwiLCBbXCJmYWN0XCIsIFwi
        bWFjYWRkcmVzc1wiXSwgXCJkZTplYTpkYjplZTpmMDowMVwiXV1cbiAgICAg
        XG4gICAgIFRoZSB0YWcgY291bGQgYWxzbyBiZSB3cml0dGVuIGxpa2UgdGhp
        czpcbiAgICAgXG4gICAgICAgICBbXCJpblwiLCBbXCJmYWN0XCIsIFwibWFj
        YWRkcmVzc1wiXSwgXCJkZTplYTpkYjplZTpmMDowMFwiLCBcImRlOmVhOmRi
        OmVlOmYwOjAxXCJdXG4gICAgIFxuICAgICBUaGUgc3ludGF4IGZvciBydWxl
        IGV4cHJlc3Npb25zIGlzIGRlZmluZWQgaW4gYGxpYi9yYXpvci9tYXRjaGVy
        LnJiYC5cbiAgICAgRXhwcmVzc2lvbnMgYXJlIG9mIHRoZSBmb3JtIGBbb3Ag
        YXJnMSBhcmcyIC4uIGFyZ25dYFxuICAgICB3aGVyZSBvcCBpcyBvbmUgb2Yg
        dGhlIG9wZXJhdG9ycyBiZWxvdywgYW5kIGFyZzEgdGhyb3VnaCBhcmduIGFy
        ZSB0aGVcbiAgICAgYXJndW1lbnRzIGZvciB0aGUgb3BlcmF0b3IuIElmIHRo
        ZXkgYXJlIGV4cHJlc3Npb25zIHRoZW1zZWx2ZXMsIHRoZXkgd2lsbFxuICAg
        ICBiZSBldmFsdWF0ZWQgYmVmb3JlIGBvcGAgaXMgZXZhbHVhdGVkLlxuICAg
        LSBUaGlzIGF0dHJpYnV0ZSBpcyByZXF1aXJlZC5cbiAgIC0gSXQgbXVzdCBi
        ZSBvZiB0eXBlIGFycmF5LlxuICAgLSBJdHMgYXJndW1lbnQgcG9zaXRpb24g
        aXMgMS5cblxuIyBFWEFNUExFU1xuXG4gIENyZWF0ZSBhIHNpbXBsZSB0YWc6
        XG4gIFxuICB7XG4gICAgXCJuYW1lXCI6IFwic21hbGxcIixcbiAgICBcInJ1
        bGVcIjogW1wiPVwiLCBbXCJmYWN0XCIsIFwicHJvY2Vzc29yY291bnRcIl0s
        IFwiMlwiXVxuICB9XG4ifSwic2NoZW1hIjp7Im5hbWUiOnsidHlwZSI6InN0
        cmluZyIsInBvc2l0aW9uIjowfSwicnVsZSI6eyJ0eXBlIjoiYXJyYXkiLCJw
        b3NpdGlvbiI6MX19fQ==
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: post
    uri: http://localhost:8150/api/commands/create-tag
    body:
      encoding: UTF-8
      string: '{"name":"tag1","rule":["=",["fact","processorcount"],"1"]}'
    headers:
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '199'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/tags/member","id":"http://localhost:8150/api/collections/tags/tag1","name":"tag1","command":"http://localhost:8150/api/collections/commands/3"}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/collections/tags/tag1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '382'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/tags/member","id":"http://localhost:8150/api/collections/tags/tag1","name":"tag1","rule":["=",["fact","processorcount"],"1"],"nodes":{"id":"http://localhost:8150/api/collections/tags/tag1/nodes","count":0,"name":"nodes"},"policies":{"id":"http://localhost:8150/api/collections/tags/tag1/policies","count":0,"name":"policies"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '7432'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"commands":[{"name":"update-repo-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-repo-task","id":"http://localhost:8150/api/commands/update-repo-task"},{"name":"delete-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-hook","id":"http://localhost:8150/api/commands/delete-hook"},{"name":"delete-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-broker","id":"http://localhost:8150/api/commands/delete-broker"},{"name":"register-node","rel":"http://api.puppetlabs.com/razor/v1/commands/register-node","id":"http://localhost:8150/api/commands/register-node"},{"name":"update-policy-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-broker","id":"http://localhost:8150/api/commands/update-policy-broker"},{"name":"update-policy-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-task","id":"http://localhost:8150/api/commands/update-policy-task"},{"name":"set-node-desired-power-state","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-desired-power-state","id":"http://localhost:8150/api/commands/set-node-desired-power-state"},{"name":"set-node-hw-info","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-hw-info","id":"http://localhost:8150/api/commands/set-node-hw-info"},{"name":"run-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/run-hook","id":"http://localhost:8150/api/commands/run-hook"},{"name":"create-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/create-policy","id":"http://localhost:8150/api/commands/create-policy"},{"name":"reinstall-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reinstall-node","id":"http://localhost:8150/api/commands/reinstall-node"},{"name":"disable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/disable-policy","id":"http://localhost:8150/api/commands/disable-policy"},{"name":"enable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/enable-policy","id":"http://localhost:8150/api/commands/enable-policy"},{"name":"create-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/create-repo","id":"http://localhost:8150/api/commands/create-repo"},{"name":"remove-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-node-metadata","id":"http://localhost:8150/api/commands/remove-node-metadata"},{"name":"modify-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-node-metadata","id":"http://localhost:8150/api/commands/modify-node-metadata"},{"name":"update-policy-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-node-metadata","id":"http://localhost:8150/api/commands/update-policy-node-metadata"},{"name":"add-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/add-policy-tag","id":"http://localhost:8150/api/commands/add-policy-tag"},{"name":"remove-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-policy-tag","id":"http://localhost:8150/api/commands/remove-policy-tag"},{"name":"create-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/create-hook","id":"http://localhost:8150/api/commands/create-hook"},{"name":"update-policy-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-repo","id":"http://localhost:8150/api/commands/update-policy-repo"},{"name":"update-tag-rule","rel":"http://api.puppetlabs.com/razor/v1/commands/update-tag-rule","id":"http://localhost:8150/api/commands/update-tag-rule"},{"name":"delete-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-policy","id":"http://localhost:8150/api/commands/delete-policy"},{"name":"delete-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-tag","id":"http://localhost:8150/api/commands/delete-tag"},{"name":"create-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/create-tag","id":"http://localhost:8150/api/commands/create-tag"},{"name":"delete-node","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-node","id":"http://localhost:8150/api/commands/delete-node"},{"name":"reboot-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reboot-node","id":"http://localhost:8150/api/commands/reboot-node"},{"name":"move-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/move-policy","id":"http://localhost:8150/api/commands/move-policy"},{"name":"set-node-ipmi-credentials","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-ipmi-credentials","id":"http://localhost:8150/api/commands/set-node-ipmi-credentials"},{"name":"delete-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-repo","id":"http://localhost:8150/api/commands/delete-repo"},{"name":"modify-policy-max-count","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-policy-max-count","id":"http://localhost:8150/api/commands/modify-policy-max-count"},{"name":"update-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-node-metadata","id":"http://localhost:8150/api/commands/update-node-metadata"},{"name":"create-task","rel":"http://api.puppetlabs.com/razor/v1/commands/create-task","id":"http://localhost:8150/api/commands/create-task"},{"name":"update-hook-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-hook-configuration","id":"http://localhost:8150/api/commands/update-hook-configuration"},{"name":"create-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/create-broker","id":"http://localhost:8150/api/commands/create-broker"},{"name":"update-broker-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-broker-configuration","id":"http://localhost:8150/api/commands/update-broker-configuration"}],"collections":[{"name":"brokers","rel":"http://api.puppetlabs.com/razor/v1/collections/brokers","id":"http://localhost:8150/api/collections/brokers","params":{"depth":{"type":"number"}}},{"name":"repos","rel":"http://api.puppetlabs.com/razor/v1/collections/repos","id":"http://localhost:8150/api/collections/repos","params":{"depth":{"type":"number"}}},{"name":"tags","rel":"http://api.puppetlabs.com/razor/v1/collections/tags","id":"http://localhost:8150/api/collections/tags","params":{"depth":{"type":"number"}}},{"name":"policies","rel":"http://api.puppetlabs.com/razor/v1/collections/policies","id":"http://localhost:8150/api/collections/policies","params":{"depth":{"type":"number"}}},{"name":"nodes","rel":"http://api.puppetlabs.com/razor/v1/collections/nodes","id":"http://localhost:8150/api/collections/nodes","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"tasks","rel":"http://api.puppetlabs.com/razor/v1/collections/tasks","id":"http://localhost:8150/api/collections/tasks","params":{"depth":{"type":"number"}}},{"name":"commands","rel":"http://api.puppetlabs.com/razor/v1/collections/commands","id":"http://localhost:8150/api/collections/commands","params":{"depth":{"type":"number"}}},{"name":"events","rel":"http://api.puppetlabs.com/razor/v1/collections/events","id":"http://localhost:8150/api/collections/events","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"hooks","rel":"http://api.puppetlabs.com/razor/v1/collections/hooks","id":"http://localhost:8150/api/collections/hooks","params":{"depth":{"type":"number"}}},{"name":"config","rel":"http://api.puppetlabs.com/razor/v1/collections/config","id":"http://localhost:8150/api/collections/config"}],"version":{"server":"v1.9.5-9-g774b5ce-dirty"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/commands/create-tag
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      Etag:
      - '"server-version-v1.9.5-9-g774b5ce-dirty"'
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '4738'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJuYW1lIjoiY3JlYXRlLXRhZyIsImhlbHAiOnsic3VtbWFyeSI6IkNyZWF0
        ZSBhIG5ldyB0YWciLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBhIG5ldyB0YWcs
        IGFuZCBzZXQgdGhlIHJ1bGUgaXQgd2lsbCB1c2UgdG8gbWF0Y2ggb24gZmFj
        dHMgYW5kIG5vZGVcbm1ldGFkYXRhLiIsInNjaGVtYSI6IiMgQWNjZXNzIENv
        bnRyb2xcblxuVGhpcyBjb21tYW5kJ3MgYWNjZXNzIGNvbnRyb2wgcGF0dGVy
        bjogYGNvbW1hbmRzOmNyZWF0ZS10YWc6JXtuYW1lfWBcblxuV29yZHMgc3Vy
        cm91bmRlZCBieSBgJXsuLi59YCBhcmUgc3Vic3RpdHV0aW9ucyBmcm9tIHRo
        ZSBpbnB1dCBkYXRhOiB0eXBpY2FsbHlcbnRoZSBuYW1lIG9mIHRoZSBvYmpl
        Y3QgYmVpbmcgbW9kaWZpZWQsIG9yIHNvbWUgb3RoZXIgY3JpdGljYWwgZGV0
        YWlsLCB0aGVzZVxuYWxsb3cgcm9sZXMgdG8gYmUgZ3JhbnRlZCBwYXJ0aWFs
        IGFjY2VzcyB0byBtb2RpZnkgdGhlIHN5c3RlbS5cblxuRm9yIG1vcmUgZGV0
        YWlsIG9uIGhvdyB0aGUgcGVybWlzc2lvbiBzdHJpbmdzIGFyZSBzdHJ1Y3R1
        cmVkIGFuZCB3b3JrLCB5b3UgY2FuXG5zZWUgdGhlIFtTaGlybyBQZXJtaXNz
        aW9ucyBkb2N1bWVudGF0aW9uXVtzaGlyb10uICBUaGF0IHBhdHRlcm4gaXMg
        ZXhwYW5kZWRcbmFuZCB0aGVuIGEgcGVybWlzc2lvbiBjaGVjayBhcHBsaWVk
        IHRvIGl0LCBiZWZvcmUgdGhlIGNvbW1hbmQgaXMgYXV0aG9yaXplZC5cblxu
        VGhlc2UgY2hlY2tzIG9ubHkgYXBwbHkgaWYgc2VjdXJpdHkgaXMgZW5hYmxl
        ZCBpbiB0aGUgUmF6b3IgY29uZmlndXJhdGlvblxuZmlsZTsgb24gdGhpcyBz
        ZXJ2ZXIgc2VjdXJpdHkgaXMgY3VycmVudGx5IGRpc2FibGVkLlxuXG5bc2hp
        cm9dOiBodHRwOi8vc2hpcm8uYXBhY2hlLm9yZy9wZXJtaXNzaW9ucy5odG1s
        XG5cbiMgQXR0cmlidXRlc1xuXG4gKiBuYW1lXG4gICAtIFRoZSBuYW1lIG9m
        IHRoZSB0YWcuXG4gICAtIFRoaXMgYXR0cmlidXRlIGlzIHJlcXVpcmVkLlxu
        ICAgLSBJdCBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nLlxuICAgLSBJdCBtdXN0
        IGJlIGJldHdlZW4gMSBhbmQgSW5maW5pdHkgaW4gbGVuZ3RoLlxuICAgLSBJ
        dHMgYXJndW1lbnQgcG9zaXRpb24gaXMgMC5cblxuICogcnVsZVxuICAgLSBU
        aGUgdGFnIG1hdGNoZXMgYSBub2RlIGlmIGV2YWx1YXRpbmcgdGhpcyBydW4g
        YWdhaW5zdCB0aGUgdGFn4oCZcyBmYWN0c1xuICAgICByZXN1bHRzIGluIHRy
        dWUuIE5vdGUgdGhhdCB0YWcgbWF0Y2hpbmcgaXMgY2FzZSBzZW5zaXRpdmUu
        XG4gICAgIFxuICAgICBGb3IgZXhhbXBsZSwgaGVyZSBpcyBhIHRhZyBydWxl
        OlxuICAgICBcbiAgICAgICAgIFtcIm9yXCIsXG4gICAgICAgICAgW1wiPVwi
        LCBbXCJmYWN0XCIsIFwibWFjYWRkcmVzc1wiXSwgXCJkZTplYTpkYjplZTpm
        MDowMFwiXVxuICAgICAgICAgIFtcIj1cIiwgW1wiZmFjdFwiLCBcIm1hY2Fk
        ZHJlc3NcIl0sIFwiZGU6ZWE6ZGI6ZWU6ZjA6MDFcIl1dXG4gICAgIFxuICAg
        ICBUaGUgdGFnIGNvdWxkIGFsc28gYmUgd3JpdHRlbiBsaWtlIHRoaXM6XG4g
        ICAgIFxuICAgICAgICAgW1wiaW5cIiwgW1wiZmFjdFwiLCBcIm1hY2FkZHJl
        c3NcIl0sIFwiZGU6ZWE6ZGI6ZWU6ZjA6MDBcIiwgXCJkZTplYTpkYjplZTpm
        MDowMVwiXVxuICAgICBcbiAgICAgVGhlIHN5bnRheCBmb3IgcnVsZSBleHBy
        ZXNzaW9ucyBpcyBkZWZpbmVkIGluIGBsaWIvcmF6b3IvbWF0Y2hlci5yYmAu
        XG4gICAgIEV4cHJlc3Npb25zIGFyZSBvZiB0aGUgZm9ybSBgW29wIGFyZzEg
        YXJnMiAuLiBhcmduXWBcbiAgICAgd2hlcmUgb3AgaXMgb25lIG9mIHRoZSBv
        cGVyYXRvcnMgYmVsb3csIGFuZCBhcmcxIHRocm91Z2ggYXJnbiBhcmUgdGhl
        XG4gICAgIGFyZ3VtZW50cyBmb3IgdGhlIG9wZXJhdG9yLiBJZiB0aGV5IGFy
        ZSBleHByZXNzaW9ucyB0aGVtc2VsdmVzLCB0aGV5IHdpbGxcbiAgICAgYmUg
        ZXZhbHVhdGVkIGJlZm9yZSBgb3BgIGlzIGV2YWx1YXRlZC5cbiAgIC0gVGhp
        cyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQuXG4gICAtIEl0IG11c3QgYmUgb2Yg
        dHlwZSBhcnJheS5cbiAgIC0gSXRzIGFyZ3VtZW50IHBvc2l0aW9uIGlzIDEu
        XG4iLCJleGFtcGxlcyI6eyJhcGkiOiJDcmVhdGUgYSBzaW1wbGUgdGFnOlxu
        XG57XG4gIFwibmFtZVwiOiBcInNtYWxsXCIsXG4gIFwicnVsZVwiOiBbXCI9
        XCIsIFtcImZhY3RcIiwgXCJwcm9jZXNzb3Jjb3VudFwiXSwgXCIyXCJdXG59
        IiwiY2xpIjoiQ3JlYXRlIGEgc2ltcGxlIHRhZzpcblxuICAgIHJhem9yIGNy
        ZWF0ZS10YWcgLS1uYW1lIHNtYWxsIC0tcnVsZSAnW1wiPVwiLCBbXCJmYWN0
        XCIsIFwicHJvY2Vzc29yY291bnRcIl0sIFwiMlwiXSdcblxuV2l0aCBwb3Np
        dGlvbmFsIGFyZ3VtZW50cywgdGhpcyBjYW4gYmUgc2hvcnRlbmVkOjpcblxu
        ICAgIHJhem9yIGNyZWF0ZS10YWcgc21hbGwgJ1tcIj1cIiwgW1wiZmFjdFwi
        LCBcInByb2Nlc3NvcmNvdW50XCJdLCBcIjJcIl0nIn0sImZ1bGwiOiIjIFNZ
        Tk9QU0lTXG5DcmVhdGUgYSBuZXcgdGFnXG5cbiMgREVTQ1JJUFRJT05cbkNy
        ZWF0ZSBhIG5ldyB0YWcsIGFuZCBzZXQgdGhlIHJ1bGUgaXQgd2lsbCB1c2Ug
        dG8gbWF0Y2ggb24gZmFjdHMgYW5kIG5vZGVcbm1ldGFkYXRhLlxuIyBBY2Nl
        c3MgQ29udHJvbFxuXG5UaGlzIGNvbW1hbmQncyBhY2Nlc3MgY29udHJvbCBw
        YXR0ZXJuOiBgY29tbWFuZHM6Y3JlYXRlLXRhZzole25hbWV9YFxuXG5Xb3Jk
        cyBzdXJyb3VuZGVkIGJ5IGAley4uLn1gIGFyZSBzdWJzdGl0dXRpb25zIGZy
        b20gdGhlIGlucHV0IGRhdGE6IHR5cGljYWxseVxudGhlIG5hbWUgb2YgdGhl
        IG9iamVjdCBiZWluZyBtb2RpZmllZCwgb3Igc29tZSBvdGhlciBjcml0aWNh
        bCBkZXRhaWwsIHRoZXNlXG5hbGxvdyByb2xlcyB0byBiZSBncmFudGVkIHBh
        cnRpYWwgYWNjZXNzIHRvIG1vZGlmeSB0aGUgc3lzdGVtLlxuXG5Gb3IgbW9y
        ZSBkZXRhaWwgb24gaG93IHRoZSBwZXJtaXNzaW9uIHN0cmluZ3MgYXJlIHN0
        cnVjdHVyZWQgYW5kIHdvcmssIHlvdSBjYW5cbnNlZSB0aGUgW1NoaXJvIFBl
        cm1pc3Npb25zIGRvY3VtZW50YXRpb25dW3NoaXJvXS4gIFRoYXQgcGF0dGVy
        biBpcyBleHBhbmRlZFxuYW5kIHRoZW4gYSBwZXJtaXNzaW9uIGNoZWNrIGFw
        cGxpZWQgdG8gaXQsIGJlZm9yZSB0aGUgY29tbWFuZCBpcyBhdXRob3JpemVk
        LlxuXG5UaGVzZSBjaGVja3Mgb25seSBhcHBseSBpZiBzZWN1cml0eSBpcyBl
        bmFibGVkIGluIHRoZSBSYXpvciBjb25maWd1cmF0aW9uXG5maWxlOyBvbiB0
        aGlzIHNlcnZlciBzZWN1cml0eSBpcyBjdXJyZW50bHkgZGlzYWJsZWQuXG5c
        bltzaGlyb106IGh0dHA6Ly9zaGlyby5hcGFjaGUub3JnL3Blcm1pc3Npb25z
        Lmh0bWxcblxuIyBBdHRyaWJ1dGVzXG5cbiAqIG5hbWVcbiAgIC0gVGhlIG5h
        bWUgb2YgdGhlIHRhZy5cbiAgIC0gVGhpcyBhdHRyaWJ1dGUgaXMgcmVxdWly
        ZWQuXG4gICAtIEl0IG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuXG4gICAtIEl0
        IG11c3QgYmUgYmV0d2VlbiAxIGFuZCBJbmZpbml0eSBpbiBsZW5ndGguXG4g
        ICAtIEl0cyBhcmd1bWVudCBwb3NpdGlvbiBpcyAwLlxuXG4gKiBydWxlXG4g
        ICAtIFRoZSB0YWcgbWF0Y2hlcyBhIG5vZGUgaWYgZXZhbHVhdGluZyB0aGlz
        IHJ1biBhZ2FpbnN0IHRoZSB0YWfigJlzIGZhY3RzXG4gICAgIHJlc3VsdHMg
        aW4gdHJ1ZS4gTm90ZSB0aGF0IHRhZyBtYXRjaGluZyBpcyBjYXNlIHNlbnNp
        dGl2ZS5cbiAgICAgXG4gICAgIEZvciBleGFtcGxlLCBoZXJlIGlzIGEgdGFn
        IHJ1bGU6XG4gICAgIFxuICAgICAgICAgW1wib3JcIixcbiAgICAgICAgICBb
        XCI9XCIsIFtcImZhY3RcIiwgXCJtYWNhZGRyZXNzXCJdLCBcImRlOmVhOmRi
        OmVlOmYwOjAwXCJdXG4gICAgICAgICAgW1wiPVwiLCBbXCJmYWN0XCIsIFwi
        bWFjYWRkcmVzc1wiXSwgXCJkZTplYTpkYjplZTpmMDowMVwiXV1cbiAgICAg
        XG4gICAgIFRoZSB0YWcgY291bGQgYWxzbyBiZSB3cml0dGVuIGxpa2UgdGhp
        czpcbiAgICAgXG4gICAgICAgICBbXCJpblwiLCBbXCJmYWN0XCIsIFwibWFj
        YWRkcmVzc1wiXSwgXCJkZTplYTpkYjplZTpmMDowMFwiLCBcImRlOmVhOmRi
        OmVlOmYwOjAxXCJdXG4gICAgIFxuICAgICBUaGUgc3ludGF4IGZvciBydWxl
        IGV4cHJlc3Npb25zIGlzIGRlZmluZWQgaW4gYGxpYi9yYXpvci9tYXRjaGVy
        LnJiYC5cbiAgICAgRXhwcmVzc2lvbnMgYXJlIG9mIHRoZSBmb3JtIGBbb3Ag
        YXJnMSBhcmcyIC4uIGFyZ25dYFxuICAgICB3aGVyZSBvcCBpcyBvbmUgb2Yg
        dGhlIG9wZXJhdG9ycyBiZWxvdywgYW5kIGFyZzEgdGhyb3VnaCBhcmduIGFy
        ZSB0aGVcbiAgICAgYXJndW1lbnRzIGZvciB0aGUgb3BlcmF0b3IuIElmIHRo
        ZXkgYXJlIGV4cHJlc3Npb25zIHRoZW1zZWx2ZXMsIHRoZXkgd2lsbFxuICAg
        ICBiZSBldmFsdWF0ZWQgYmVmb3JlIGBvcGAgaXMgZXZhbHVhdGVkLlxuICAg
        LSBUaGlzIGF0dHJpYnV0ZSBpcyByZXF1aXJlZC5cbiAgIC0gSXQgbXVzdCBi
        ZSBvZiB0eXBlIGFycmF5LlxuICAgLSBJdHMgYXJndW1lbnQgcG9zaXRpb24g
        aXMgMS5cblxuIyBFWEFNUExFU1xuXG4gIENyZWF0ZSBhIHNpbXBsZSB0YWc6
        XG4gIFxuICB7XG4gICAgXCJuYW1lXCI6IFwic21hbGxcIixcbiAgICBcInJ1
        bGVcIjogW1wiPVwiLCBbXCJmYWN0XCIsIFwicHJvY2Vzc29yY291bnRcIl0s
        IFwiMlwiXVxuICB9XG4ifSwic2NoZW1hIjp7Im5hbWUiOnsidHlwZSI6InN0
        cmluZyIsInBvc2l0aW9uIjowfSwicnVsZSI6eyJ0eXBlIjoiYXJyYXkiLCJw
        b3NpdGlvbiI6MX19fQ==
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: post
    uri: http://localhost:8150/api/commands/create-tag
    body:
      encoding: UTF-8
      string: '{"name":"tag2","rule":["=",["fact","processorcount"],"2"]}'
    headers:
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '199'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/tags/member","id":"http://localhost:8150/api/collections/tags/tag2","name":"tag2","command":"http://localhost:8150/api/collections/commands/4"}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/collections/tags/tag2
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '382'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/tags/member","id":"http://localhost:8150/api/collections/tags/tag2","name":"tag2","rule":["=",["fact","processorcount"],"2"],"nodes":{"id":"http://localhost:8150/api/collections/tags/tag2/nodes","count":0,"name":"nodes"},"policies":{"id":"http://localhost:8150/api/collections/tags/tag2/policies","count":0,"name":"policies"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '7432'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"commands":[{"name":"update-repo-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-repo-task","id":"http://localhost:8150/api/commands/update-repo-task"},{"name":"delete-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-hook","id":"http://localhost:8150/api/commands/delete-hook"},{"name":"delete-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-broker","id":"http://localhost:8150/api/commands/delete-broker"},{"name":"register-node","rel":"http://api.puppetlabs.com/razor/v1/commands/register-node","id":"http://localhost:8150/api/commands/register-node"},{"name":"update-policy-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-broker","id":"http://localhost:8150/api/commands/update-policy-broker"},{"name":"update-policy-task","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-task","id":"http://localhost:8150/api/commands/update-policy-task"},{"name":"set-node-desired-power-state","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-desired-power-state","id":"http://localhost:8150/api/commands/set-node-desired-power-state"},{"name":"set-node-hw-info","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-hw-info","id":"http://localhost:8150/api/commands/set-node-hw-info"},{"name":"run-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/run-hook","id":"http://localhost:8150/api/commands/run-hook"},{"name":"create-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/create-policy","id":"http://localhost:8150/api/commands/create-policy"},{"name":"reinstall-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reinstall-node","id":"http://localhost:8150/api/commands/reinstall-node"},{"name":"disable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/disable-policy","id":"http://localhost:8150/api/commands/disable-policy"},{"name":"enable-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/enable-policy","id":"http://localhost:8150/api/commands/enable-policy"},{"name":"create-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/create-repo","id":"http://localhost:8150/api/commands/create-repo"},{"name":"remove-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-node-metadata","id":"http://localhost:8150/api/commands/remove-node-metadata"},{"name":"modify-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-node-metadata","id":"http://localhost:8150/api/commands/modify-node-metadata"},{"name":"update-policy-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-node-metadata","id":"http://localhost:8150/api/commands/update-policy-node-metadata"},{"name":"add-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/add-policy-tag","id":"http://localhost:8150/api/commands/add-policy-tag"},{"name":"remove-policy-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/remove-policy-tag","id":"http://localhost:8150/api/commands/remove-policy-tag"},{"name":"create-hook","rel":"http://api.puppetlabs.com/razor/v1/commands/create-hook","id":"http://localhost:8150/api/commands/create-hook"},{"name":"update-policy-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/update-policy-repo","id":"http://localhost:8150/api/commands/update-policy-repo"},{"name":"update-tag-rule","rel":"http://api.puppetlabs.com/razor/v1/commands/update-tag-rule","id":"http://localhost:8150/api/commands/update-tag-rule"},{"name":"delete-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-policy","id":"http://localhost:8150/api/commands/delete-policy"},{"name":"delete-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-tag","id":"http://localhost:8150/api/commands/delete-tag"},{"name":"create-tag","rel":"http://api.puppetlabs.com/razor/v1/commands/create-tag","id":"http://localhost:8150/api/commands/create-tag"},{"name":"delete-node","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-node","id":"http://localhost:8150/api/commands/delete-node"},{"name":"reboot-node","rel":"http://api.puppetlabs.com/razor/v1/commands/reboot-node","id":"http://localhost:8150/api/commands/reboot-node"},{"name":"move-policy","rel":"http://api.puppetlabs.com/razor/v1/commands/move-policy","id":"http://localhost:8150/api/commands/move-policy"},{"name":"set-node-ipmi-credentials","rel":"http://api.puppetlabs.com/razor/v1/commands/set-node-ipmi-credentials","id":"http://localhost:8150/api/commands/set-node-ipmi-credentials"},{"name":"delete-repo","rel":"http://api.puppetlabs.com/razor/v1/commands/delete-repo","id":"http://localhost:8150/api/commands/delete-repo"},{"name":"modify-policy-max-count","rel":"http://api.puppetlabs.com/razor/v1/commands/modify-policy-max-count","id":"http://localhost:8150/api/commands/modify-policy-max-count"},{"name":"update-node-metadata","rel":"http://api.puppetlabs.com/razor/v1/commands/update-node-metadata","id":"http://localhost:8150/api/commands/update-node-metadata"},{"name":"create-task","rel":"http://api.puppetlabs.com/razor/v1/commands/create-task","id":"http://localhost:8150/api/commands/create-task"},{"name":"update-hook-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-hook-configuration","id":"http://localhost:8150/api/commands/update-hook-configuration"},{"name":"create-broker","rel":"http://api.puppetlabs.com/razor/v1/commands/create-broker","id":"http://localhost:8150/api/commands/create-broker"},{"name":"update-broker-configuration","rel":"http://api.puppetlabs.com/razor/v1/commands/update-broker-configuration","id":"http://localhost:8150/api/commands/update-broker-configuration"}],"collections":[{"name":"brokers","rel":"http://api.puppetlabs.com/razor/v1/collections/brokers","id":"http://localhost:8150/api/collections/brokers","params":{"depth":{"type":"number"}}},{"name":"repos","rel":"http://api.puppetlabs.com/razor/v1/collections/repos","id":"http://localhost:8150/api/collections/repos","params":{"depth":{"type":"number"}}},{"name":"tags","rel":"http://api.puppetlabs.com/razor/v1/collections/tags","id":"http://localhost:8150/api/collections/tags","params":{"depth":{"type":"number"}}},{"name":"policies","rel":"http://api.puppetlabs.com/razor/v1/collections/policies","id":"http://localhost:8150/api/collections/policies","params":{"depth":{"type":"number"}}},{"name":"nodes","rel":"http://api.puppetlabs.com/razor/v1/collections/nodes","id":"http://localhost:8150/api/collections/nodes","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"tasks","rel":"http://api.puppetlabs.com/razor/v1/collections/tasks","id":"http://localhost:8150/api/collections/tasks","params":{"depth":{"type":"number"}}},{"name":"commands","rel":"http://api.puppetlabs.com/razor/v1/collections/commands","id":"http://localhost:8150/api/collections/commands","params":{"depth":{"type":"number"}}},{"name":"events","rel":"http://api.puppetlabs.com/razor/v1/collections/events","id":"http://localhost:8150/api/collections/events","params":{"start":{"type":"number"},"limit":{"type":"number"},"depth":{"type":"number"}}},{"name":"hooks","rel":"http://api.puppetlabs.com/razor/v1/collections/hooks","id":"http://localhost:8150/api/collections/hooks","params":{"depth":{"type":"number"}}},{"name":"config","rel":"http://api.puppetlabs.com/razor/v1/collections/config","id":"http://localhost:8150/api/collections/config"}],"version":{"server":"v1.9.5-9-g774b5ce-dirty"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:07 GMT
- request:
    method: get
    uri: http://localhost:8150/api/commands/create-policy
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      Etag:
      - '"server-version-v1.9.5-9-g774b5ce-dirty"'
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '11422'
      Date:
      - Fri, 23 Aug 2019 19:49:07 GMT
    body:
      encoding: UTF-8
      string: '{"name":"create-policy","help":{"summary":"Create a new policy","description":"Policies
        tie together the rules, as tags, with the task and repo containing\nthe OS
        to install, and the broker for post-install configuration.\n\nThe overall
        list of policies is ordered, and policies are considered in that\norder. When
        a new policy is created, the entry `before` or `after` can be\nused to put
        the new policy into the table before or after another\npolicy. If neither
        `before` or `after` are specified, the policy is\nappended to the policy table.","schema":"#
        Access Control\n\nThis command''s access control pattern: `commands:create-policy:%{name}`\n\nWords
        surrounded by `%{...}` are substitutions from the input data: typically\nthe
        name of the object being modified, or some other critical detail, these\nallow
        roles to be granted partial access to modify the system.\n\nFor more detail
        on how the permission strings are structured and work, you can\nsee the [Shiro
        Permissions documentation][shiro].  That pattern is expanded\nand then a permission
        check applied to it, before the command is authorized.\n\nThese checks only
        apply if security is enabled in the Razor configuration\nfile; on this server
        security is currently disabled.\n\n[shiro]: http://shiro.apache.org/permissions.html\n\n#
        Attributes\n\n * name\n   - The name of the policy to create.\n   - This attribute
        is required.\n   - It must be of type string.\n   - It must be between 1 and
        Infinity in length.\n   - Its argument position is 0.\n\n * hostname\n   -
        The hostname pattern to use for newly installed nodes.  This is filled\n     in
        on a per-node basis, and then supplied to the task to be configured\n     appropriately
        on the newly installed node.\n     \n     Substitutions are performed using
        `${...}` syntax, and the available\n     substitution names on your server
        are:\n     \n     - id -- the internal node ID number\n   - This attribute
        is required.\n   - It must be of type string.\n   - It must be between 1 and
        Infinity in length.\n\n * root_password\n   - The root password for newly
        installed systems.  This is passed directly\n     to the individual task,
        rather than \"understood\" by the server, so the\n     valid values are dependent
        on the individual task capabilities.\n   - This attribute is required.\n   -
        It must be of type string.\n   - It must be between 1 and Infinity in length.\n\n
        * enabled\n   - Is this policy enabled when first created?\n   - It must be
        of type boolean.\n\n * max_count\n   - The maximum number of nodes that can
        bind to this policy.\n     If omitted, the policy is ''unlimited'', and no
        maximum is applied.\n   - It must be of type number.\n\n * before\n   - The
        name of the policy to create this policy before in the policy list.\n   -
        It must be of type string.\n   - If present, after must not be present.\n   -
        It must match the name of an existing policy.\n\n * after\n   - The name of
        the policy to create this policy after in the policy list.\n   - It must be
        of type string.\n   - If present, before must not be present.\n   - It must
        match the name of an existing policy.\n\n * tags\n   - The names of tags that
        are used for matching nodes to this policy.\n     \n     When a node has all
        these tags matched on it, it will be a candidate\n     for binding to this
        policy.\n   - It must be of type array.\n     - All elements must be of type
        string.\n     - All elements must match the name of an existing tag.\n\n *
        repo\n   - The name of the repository containing the OS to be installed by
        this policy.\n     This should match the task assigned, or bad things will
        happen.\n   - This attribute is required.\n   - It must be of type string.\n   -
        It must match the name of an existing repo.\n\n * broker\n   - The name of
        the broker to use when the node is fully installed, and is ready\n     to
        hand off to the final configuration management system.  If you have no\n     ongoing
        configuration management, the supplied `noop` broker will do nothing.\n     \n     Please
        note that this is a broker created with the `create-broker` command,\n     which
        is distinct from the broker types found on disk.\n   - This attribute is required.\n   -
        It must be of type string.\n   - It must match the name of an existing broker.\n\n
        * task\n   - The name of the task used to install nodes that match this policy.  This
        must\n     match the selected repo, as it references files contained within
        that repository.\n   - It must be of type string.\n\n * node_metadata\n   -
        Allows a policy to apply metadata to a node when it binds. This is NON\n     AUTHORITATIVE
        in that it will not replace existing metadata on the node\n     with the same
        keys it will only add keys that are missing.\n   - It must be of type object.\n","examples":{"api":"A
        sample policy installing CentOS 6.4:\n\n{\n  \"name\":          \"centos-for-small\",\n  \"repo\":          \"centos-6.4\",\n  \"task\":          \"centos\",\n  \"broker\":        \"noop\",\n  \"enabled\":       true,\n  \"hostname\":      \"host${id}.example.com\",\n  \"root_password\":
        \"secret\",\n  \"max_count\":     20,\n  \"before\":        \"other policy\",\n  \"tags\":          [\"small\"],\n  \"node_metadata\":
        {\"key\": \"value\"}\n}","cli":"A sample policy installing CentOS 6.4:\n\n    razor
        create-policy --name centos-for-small \\\n      --repo centos-6.4 --task centos
        --broker noop \\\n      --enabled --hostname ''host${id}.example.com'' \\\n      --root-password
        secret --max-count 20 \\\n      --before \"other policy\" --tag small --node-metadata
        key=value\n\nWith positional arguments, this can be shortened::\n\n    razor
        create-policy centos-for-small --repo centos-6.4 --broker noop \\\n      --hostname
        ''host${id}.example.com'' --root-password secret"},"full":"# SYNOPSIS\nCreate
        a new policy\n\n# DESCRIPTION\nPolicies tie together the rules, as tags, with
        the task and repo containing\nthe OS to install, and the broker for post-install
        configuration.\n\nThe overall list of policies is ordered, and policies are
        considered in that\norder. When a new policy is created, the entry `before`
        or `after` can be\nused to put the new policy into the table before or after
        another\npolicy. If neither `before` or `after` are specified, the policy
        is\nappended to the policy table.\n# Access Control\n\nThis command''s access
        control pattern: `commands:create-policy:%{name}`\n\nWords surrounded by `%{...}`
        are substitutions from the input data: typically\nthe name of the object being
        modified, or some other critical detail, these\nallow roles to be granted
        partial access to modify the system.\n\nFor more detail on how the permission
        strings are structured and work, you can\nsee the [Shiro Permissions documentation][shiro].  That
        pattern is expanded\nand then a permission check applied to it, before the
        command is authorized.\n\nThese checks only apply if security is enabled in
        the Razor configuration\nfile; on this server security is currently disabled.\n\n[shiro]:
        http://shiro.apache.org/permissions.html\n\n# Attributes\n\n * name\n   -
        The name of the policy to create.\n   - This attribute is required.\n   -
        It must be of type string.\n   - It must be between 1 and Infinity in length.\n   -
        Its argument position is 0.\n\n * hostname\n   - The hostname pattern to use
        for newly installed nodes.  This is filled\n     in on a per-node basis, and
        then supplied to the task to be configured\n     appropriately on the newly
        installed node.\n     \n     Substitutions are performed using `${...}` syntax,
        and the available\n     substitution names on your server are:\n     \n     -
        id -- the internal node ID number\n   - This attribute is required.\n   -
        It must be of type string.\n   - It must be between 1 and Infinity in length.\n\n
        * root_password\n   - The root password for newly installed systems.  This
        is passed directly\n     to the individual task, rather than \"understood\"
        by the server, so the\n     valid values are dependent on the individual task
        capabilities.\n   - This attribute is required.\n   - It must be of type string.\n   -
        It must be between 1 and Infinity in length.\n\n * enabled\n   - Is this policy
        enabled when first created?\n   - It must be of type boolean.\n\n * max_count\n   -
        The maximum number of nodes that can bind to this policy.\n     If omitted,
        the policy is ''unlimited'', and no maximum is applied.\n   - It must be of
        type number.\n\n * before\n   - The name of the policy to create this policy
        before in the policy list.\n   - It must be of type string.\n   - If present,
        after must not be present.\n   - It must match the name of an existing policy.\n\n
        * after\n   - The name of the policy to create this policy after in the policy
        list.\n   - It must be of type string.\n   - If present, before must not be
        present.\n   - It must match the name of an existing policy.\n\n * tags\n   -
        The names of tags that are used for matching nodes to this policy.\n     \n     When
        a node has all these tags matched on it, it will be a candidate\n     for
        binding to this policy.\n   - It must be of type array.\n     - All elements
        must be of type string.\n     - All elements must match the name of an existing
        tag.\n\n * repo\n   - The name of the repository containing the OS to be installed
        by this policy.\n     This should match the task assigned, or bad things will
        happen.\n   - This attribute is required.\n   - It must be of type string.\n   -
        It must match the name of an existing repo.\n\n * broker\n   - The name of
        the broker to use when the node is fully installed, and is ready\n     to
        hand off to the final configuration management system.  If you have no\n     ongoing
        configuration management, the supplied `noop` broker will do nothing.\n     \n     Please
        note that this is a broker created with the `create-broker` command,\n     which
        is distinct from the broker types found on disk.\n   - This attribute is required.\n   -
        It must be of type string.\n   - It must match the name of an existing broker.\n\n
        * task\n   - The name of the task used to install nodes that match this policy.  This
        must\n     match the selected repo, as it references files contained within
        that repository.\n   - It must be of type string.\n\n * node_metadata\n   -
        Allows a policy to apply metadata to a node when it binds. This is NON\n     AUTHORITATIVE
        in that it will not replace existing metadata on the node\n     with the same
        keys it will only add keys that are missing.\n   - It must be of type object.\n\n#
        EXAMPLES\n\n  A sample policy installing CentOS 6.4:\n  \n  {\n    \"name\":          \"centos-for-small\",\n    \"repo\":          \"centos-6.4\",\n    \"task\":          \"centos\",\n    \"broker\":        \"noop\",\n    \"enabled\":       true,\n    \"hostname\":      \"host${id}.example.com\",\n    \"root_password\":
        \"secret\",\n    \"max_count\":     20,\n    \"before\":        \"other policy\",\n    \"tags\":          [\"small\"],\n    \"node_metadata\":
        {\"key\": \"value\"}\n  }\n"},"schema":{"name":{"type":"string","position":0},"hostname":{"type":"string"},"root_password":{"type":"string","aliases":["root-password"]},"enabled":{"type":"boolean"},"max_count":{"type":"number","aliases":["max-count"]},"before":{"type":"string"},"after":{"type":"string"},"tags":{"type":"array","aliases":["tag"]},"repo":{"type":"string"},"broker":{"type":"string"},"task":{"type":"string"},"node_metadata":{"type":"object","aliases":["node-metadata"]}}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:08 GMT
- request:
    method: post
    uri: http://localhost:8150/api/commands/create-policy
    body:
      encoding: UTF-8
      string: '{"name":"test","hostname":"abc.com","root_password":"abc","task":"noop","repo":"name","broker":"puppet","tags":["tag1","tag2"]}'
    headers:
      Content-Type:
      - application/json
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '207'
      Date:
      - Fri, 23 Aug 2019 19:49:08 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/policies/member","id":"http://localhost:8150/api/collections/policies/test","name":"test","command":"http://localhost:8150/api/collections/commands/5"}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:08 GMT
- request:
    method: get
    uri: http://localhost:8150/api/collections/policies/test
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
      Accept-Language:
      - en_US,en
      User-Agent:
      - Faraday v0.15.4
      Authorization:
      - Basic Og==
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Server:
      - Apache-Coyote/1.1
      X-Content-Type-Options:
      - nosniff
      Content-Type:
      - application/json
      Content-Length:
      - '1071'
      Date:
      - Fri, 23 Aug 2019 19:49:08 GMT
    body:
      encoding: UTF-8
      string: '{"spec":"http://api.puppetlabs.com/razor/v1/collections/policies/member","id":"http://localhost:8150/api/collections/policies/test","name":"test","repo":{"spec":"http://api.puppetlabs.com/razor/v1/collections/repos/member","id":"http://localhost:8150/api/collections/repos/name","name":"name"},"task":{"spec":"http://api.puppetlabs.com/razor/v1/collections/tasks/member","id":"http://localhost:8150/api/collections/tasks/noop","name":"noop"},"broker":{"spec":"http://api.puppetlabs.com/razor/v1/collections/brokers/member","id":"http://localhost:8150/api/collections/brokers/puppet","name":"puppet"},"enabled":true,"configuration":{"hostname_pattern":"abc.com","root_password":"abc"},"tags":[{"spec":"http://api.puppetlabs.com/razor/v1/collections/tags/member","id":"http://localhost:8150/api/collections/tags/tag1","name":"tag1"},{"spec":"http://api.puppetlabs.com/razor/v1/collections/tags/member","id":"http://localhost:8150/api/collections/tags/tag2","name":"tag2"}],"nodes":{"id":"http://localhost:8150/api/collections/policies/test/nodes","count":0,"name":"nodes"}}'
    http_version:
  recorded_at: Fri, 23 Aug 2019 19:49:08 GMT
recorded_with: VCR 4.0.0
